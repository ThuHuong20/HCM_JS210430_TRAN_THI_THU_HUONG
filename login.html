<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="./css/login.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>
<body>
    <div class="login">
        <h1>Đăng nhập</h1>
        <hr>
        <input id="email" type="text" placeholder="Nhập email"><br>
        <p class="validate-email"></p>
        <input id="password" type="password" placeholder="Nhập mật khẩu"><br>
        <span>Quên mật khẩu? hoặc <a href="./register.html">Đăng kí</a></span><br>
        <div class="buttonClick">
            <span onclick="loginUser()">Đăng nhập</span>
        </div>
    </div>
    <div id="snackbar"></div>
    <script>
        function myFunction() {
            var x = document.getElementById("snackbar");
            x.className = "show";
            setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
        }
        let message = document.getElementById("snackbar");
        // myFunction(message.innerHTML = "chưa nhập mật khẩu!")
        function isEmail(email) {
            return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
        }
        function uuid() {
            return new Date().getMilliseconds() + Math.floor(Math.random() * 9999999999999);
        }
        function loginUser() {
            let listUsers = JSON.parse(localStorage.getItem("listUsers")) || [];
            let valueEmail = document.getElementById("email").value;
            let valuePassword = document.getElementById("password").value;
            let userInfor = {
                email: valueEmail,
                password: valuePassword,
            }
            for (let i = 0; i < listUsers.length; i++) {
                if (listUsers[i].email == valueEmail && listUsers[i].password == valuePassword) {
                    console.log("Đăng nhập thành công!");
                    localStorage.setItem("checkLogin", listUsers[i].idUser)
                    window.location.href = "index.html"
                    return;
                }
            }
            myFunction(message.innerHTML = "Tài khoản hoặc mật khẩu không đúng!")
        }
    </script>
  
</body>

</html>